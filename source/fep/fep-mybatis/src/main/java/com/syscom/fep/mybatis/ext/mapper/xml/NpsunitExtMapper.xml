<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper
	namespace="com.syscom.fep.mybatis.ext.mapper.NpsunitExtMapper">
	<select id="queryNPSUNITbyUNITNO" parameterType="map"
		resultMap="com.syscom.fep.mybatis.mapper.NpsunitMapper.BaseResultMap">
		<!-- WARNING - @mbg.generated This element is automatically generated by 
			MyBatis Generator, do not modify. -->
		select
		<include
			refid="com.syscom.fep.mybatis.mapper.NpsunitMapper.Base_Column_List" />
		from NPSUNIT
		where NPSUNIT_NO = #{npsunitNo,jdbcType=CHAR}
	</select>


	<!-- Han Add 2022-07-21 -->
	<update id="truncateNPSUNIT">
		TRUNCATE TABLE NPSUNIT IMMEDIATE
	</update>

	<delete id="deleteNPSUNIT">
		delete from NPSUNIT
	</delete>

	<!-- Han Add 2022-07-21 -->
	<select id="queryAllData" parameterType="map" resultType="map">
		SELECT * FROM NPSCHK
		<if test="@com.syscom.fep.common.util.DbHelper@isSqlInOrderByValid(orderBy)">
			ORDER BY ${orderBy}
		</if>
	</select>
	
	<!-- Bruce add 將生效資料更新全國性繳費委託單位檔 批次寫入 -->
	<insert id="insertByNpschk">
		INSERT INTO NPSUNIT     
		SELECT  
		      NPSCHK_NO, NPSCHK_PAYTYPE, NPSCHK_FEENO, NPSCHK_NAME, NPSCHK_NAME_S, 
    		  NPSCHK_PAY_NAME, NPSCHK_BKNO, NPSCHK_MONTHLY_FG,NPSCHK_EFFECTDATE, 
    		  NPSCHK_FEE, NPSCHK_RECV_FEE1, NPSCHK_RECV_FEE2, NPSCHK_RECV_FEE3, NPSCHK_RECV_FEE4,
    		  NPSCHK_OTHER_FEE1, NPSCHK_OTHER_FEE2, NPSCHK_OTHER_FEE3, NPSCHK_OTHER_FEE4, 
    		  NPSCHK_OTHER_FEE5, NPSCHK_TRIN_BKNO, NPSCHK_PAYTYPE_NAME, NPSCHK_RE_FG, NPSCHK_UNIT_NO,
    		  NPSCHK_PAY_KIND, NPSCHK_UNIT, UPDATE_USERID, UPDATE_TIME
	<!--	<include refid="com.syscom.fep.mybatis.mapper.NpschkMapper.Base_Column_List" /> -->
		  FROM NPSCHK 
		 WHERE NPSCHK_NO = #{npsunit.npsunitNo,jdbcType=CHAR} 
		   AND NPSCHK_PAYTYPE = #{npsunit.npsunitPaytype,jdbcType=CHAR}
		   AND NPSCHK_FEENO = #{npsunit.npsunitFeeno,jdbcType=CHAR} 
		   AND NPSCHK_EFFECTDATE = #{npsunit.npsunitEffectdate,jdbcType=VARCHAR}		
	</insert>

</mapper>