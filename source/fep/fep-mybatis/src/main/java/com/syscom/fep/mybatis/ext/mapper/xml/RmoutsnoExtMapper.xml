<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.syscom.fep.mybatis.ext.mapper.RmoutsnoExtMapper">
  <update id="updateRMOUTSNObyFISCResNO" parameterType="com.syscom.fep.mybatis.model.Rmoutsno">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    update RMOUTSNO
    set
      RMOUTSNO_REP_NO = #{rmoutsnoRepNo,jdbcType=DECIMAL}
    WHERE RMOUTSNO_SENDER_BANK = #{rmoutsnoSenderBank,jdbcType=CHAR}
    and RMOUTSNO_RECEIVER_BANK = #{rmoutsnoReceiverBank,jdbcType=CHAR}
    AND RMOUTSNO_REP_NO &lt; #{rmoutsnoRepNo,jdbcType=DECIMAL}


  </update>
    <select id="getRMOUTSNOByNONotEqualREPNO" parameterType="map" resultMap="com.syscom.fep.mybatis.mapper.RmoutsnoMapper.BaseResultMap">
      SELECT * FROM RMOUTSNO WHERE
      RMOUTSNO_NO != RMOUTSNO_REP_NO or
    RMOUTSNO_RECEIVER_BANK IN (SELECT SUBSTR(RMOUT_RECEIVER_BANK,1,3) FROM
    RMOUT WHERE RMOUT_TXDATE=#{rmoutTxDate,jdbcType=CHAR} AND RMOUT_STAT = '99')
    </select>
  <select id="getRMOUTSNOByDef" parameterType="map" resultMap="com.syscom.fep.mybatis.mapper.RmoutsnoMapper.BaseResultMap">
    SELECT
    <include refid="com.syscom.fep.mybatis.mapper.RmoutsnoMapper.Base_Column_List" />
    FROM RMOUTSNO
    <where>
      <if test='rmoutsnoSenderBank != null'>
        AND RMOUTSNO_SENDER_BANK = #{rmoutsnoSenderBank,jdbcType=CHAR}
      </if>
      <if test='rmoutsnoChgk != null'>
        AND RMOUTSNO_CHGK = #{rmoutsnoChgk,jdbcType=CHAR}
      </if>
    </where>
  </select>
  <select id="getRMOUTSNOByPK" parameterType="map" resultType="java.util.HashMap">
    SELECT * FROM RMOUTSNO
    <where>
    <if test="rmoutsnoSenderBank != ''">
       AND  RMOUTSNO_SENDER_BANK = #{rmoutsnoSenderBank,jdbcType=CHAR}
    </if>
    <if test="rmoutsnoReceiverBank != ''">
      <choose>
        <when test="isSpecificRcvBank==true">
          AND  RMOUTSNO_RECEIVER_BANK = #{rmoutsnoReceiverBank,jdbcType=CHAR}
        </when>
        <otherwise>
          AND  RMOUTSNO_RECEIVER_BANK != #{rmoutsnoReceiverBank,jdbcType=CHAR}
        </otherwise>
      </choose>
    </if>
    </where>
  </select>
  <update id="updateRMOUTSNOforBatchDaily">
      update RMOUTSNO
        set
          RMOUTSNO_NO = 0,
          RMOUTSNO_REP_NO = 0,
          RMOUTSNO_CHGK = 0,
          RMOUTSNO_CHGK_TIMES = 0
    </update>
</mapper>