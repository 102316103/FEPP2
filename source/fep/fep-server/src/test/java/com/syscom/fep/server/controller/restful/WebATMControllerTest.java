package com.syscom.fep.server.controller.restful;

import org.junit.jupiter.api.AfterAll;
import org.junit.jupiter.api.BeforeAll;
import org.junit.jupiter.api.Test;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.http.MediaType;
import org.springframework.test.web.servlet.MockMvc;
import org.springframework.test.web.servlet.MvcResult;
import org.springframework.test.web.servlet.RequestBuilder;
import org.springframework.test.web.servlet.ResultActions;
import org.springframework.test.web.servlet.request.MockMvcRequestBuilders;
import org.springframework.test.web.servlet.result.MockMvcResultMatchers;

import com.syscom.fep.frmcommon.util.SpringBeanFactoryUtil;
import com.syscom.fep.server.ServerBaseTest;

public class WebATMControllerTest extends ServerBaseTest {
	@Autowired
	private MockMvc mockMvc;

	@BeforeAll
	public void setup() throws Exception {
		SpringBeanFactoryUtil.registerController(WebATMController.class);
	}

	@AfterAll
	public void tearDown() throws Exception {
		SpringBeanFactoryUtil.unregisterBean(WebATMController.class);
	}

	// 2021/11/11台北新增測試電文 START ADD BY WJ
	/**
	 * 晶片卡繳費
	 * SelfIssueRequestA
	 * 
	 * @throws Exception
	 */
	@Test
	public void testEFT2561() throws Exception {
		String messageXml = "<?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n"
				+ "<FEP>\r\n"
				+ "  <RqHeader>\r\n"
				+ "    <BranchID>768</BranchID>\r\n"
				+ "    <ChlEJNo>20200309T095331524</ChlEJNo>\r\n"
				+ "    <ChlName>WEBATM</ChlName>\r\n"
				+ "    <ChlSendTime>2020/03/09T09:53:31:524</ChlSendTime>\r\n"
				+ "    <MsgID>EFT</MsgID>\r\n"
				+ "    <MsgType>G</MsgType>\r\n"
				+ "    <TermID>26</TermID>\r\n"
				+ "    <TxnID>EFT</TxnID>\r\n"
				+ "  </RqHeader>\r\n"
				+ "  <SvcRq>\r\n"
				+ "    <Rq>0F0F0F000698013031390F0F202045465441323031343038303537363832363130313030313030303030303031303130393033303930303130393033303930303030303032333830373030313433303034303031323937323430303134333030343030313239373234303038303030303938373736313233343536372020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020203030303030303032303030303030303035393939392020202020202020202020202020202030303030303030302020202020202020202020202020303030303030303030343238323738333732303230303330393039353235333030313433303034303031323937323431343330303430303132393732343031303035303838313933383339323030303030373639374537333246464244413833364435443930303030303030303130393033303930303030303032332020202030393039303330392020202020202020303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030313838383838383839393939393939393030303039383737363132333435363739393939313233312020202020202020202020203030303030303030303030303030303030303030303030303030303030302020202020202020202031302E31312E33332E323020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020</Rq>\r\n"
				+ "  </SvcRq>\r\n"
				+ "</FEP>";
		this.testProcessRequestData(messageXml);
	}

	@Test
	public void testEFT2562() throws Exception {
		String messageXml = "<?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n"
				+ "<FEP>\n" +
				"  <RqHeader>\n" +
				"    <BranchID>768</BranchID>\n" +
				"    <ChlEJNo>20200317T183437191</ChlEJNo>\n" +
				"    <ChlName>PAYBILL</ChlName>\n" +
				"    <ChlSendTime>2020/03/17T18:34:37:191</ChlSendTime>\n" +
				"    <MsgID>EFT</MsgID>\n" +
				"    <MsgType>G</MsgType>\n" +
				"    <TermID>25</TermID>\n" +
				"    <TxnID>EFT</TxnID>\n" +
				"  </RqHeader>\n" +
				"  <SvcRq>\n" +
				"    <Rq>0F0F0F000698013036320F0F202045465441323031343038303537363832353130313030313030303030303031303130393033313730303130393033313730303030303037333030393030353035303031303031353630303030303530353030313030313536303030383037303030363638323936323535353030392020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020203030303030303031303030303030303030303131353030353938303232333130353330303830303030303030302020202020202020202020202020303030303030303030313038313032363532303230303331373138333430373030353035303031303031353630303035303530303130303135363030303031304632323234343436363631313030303030303839314436463036363131313439303341394630303030303030303130393033313730303030303037332020202031373039303331372020202020202020303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030313030303334303031313031313130313030303636383239363235353530303939393939313233312020202020202020202020203030303030303030303030303030303030303030303030303030303030302020202020202020202031302E31312E33322E353120202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020</Rq>\n"
				+
				"  </SvcRq>\n" +
				"</FEP>";
		this.testProcessRequestData(messageXml);
	}

	/**
	 * 晶片卡繳費確認
	 * ATMConfirmA
	 * 
	 * @throws Exception
	 */
	@Test
	public void testEFF2562() throws Exception {
		String messageXml = "<?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n"
				+ "<FEP>\n" +
				"  <RqHeader>\n" +
				"    <BranchID>768</BranchID>\n" +
				"    <ChlEJNo>20200317T183441285</ChlEJNo>\n" +
				"    <ChlName>PAYBILL</ChlName>\n" +
				"    <ChlSendTime>2020/03/17T18:34:41:285</ChlSendTime>\n" +
				"    <MsgID>EFF</MsgID>\n" +
				"    <MsgType>G</MsgType>\n" +
				"    <TermID>25</TermID>\n" +
				"    <TxnID>EFT</TxnID>\n" +
				"  </RqHeader>\n" +
				"  <SvcRq>\n" +
				"    <Rq>0F0F0F000589013036330F0F20204546464132303134303830353736383235313031303031303030303030303230313039303331373630313039303331373030303030303734303039303035303530303130303135363030303030353035303031303031353630303038303730303036363832393632353535303039202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020303030303030303130303030303030303030313135303035393830323233313035333030383030303030303030202020202020202020202020202030303030303030303031303831303236353230323030333137313833343037303035303530303130303135363030303530353030313030313536303030303130463232323434343636363131303030303030383931443646303636313131343930334139463739393834343330313039303331373030303030303733202020203137303930333137202020202020202030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303031303030333430303131303131313031303030363638323936323535353030393939393931323331202020202020202020202020</Rq>\n"
				+
				"  </SvcRq>\n" +
				"</FEP>";
		this.testProcessRequestData(messageXml);
	}

	@Test
	public void testEFT2564() throws Exception {
		String messageXml = "<?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n"
				+ "<FEP>\n" +
				"  <RqHeader>\n" +
				"    <BranchID>768</BranchID>\n" +
				"    <ChlEJNo>20200109T200439800</ChlEJNo>\n" +
				"    <ChlName>WEBATM</ChlName>\n" +
				"    <ChlSendTime>2020/01/09T20:04:39:800</ChlSendTime>\n" +
				"    <MsgID>EFT</MsgID>\n" +
				"    <MsgType>G</MsgType>\n" +
				"    <TermID>25</TermID>\n" +
				"    <TxnID>EFT</TxnID>\n" +
				"  </RqHeader>\n" +
				"  <SvcRq>\n" +
				"    <Rq>0F0F0F000698013039330F0F202045465441323031343038303537363832353130313030313030303030303031303130393031303930303130393031303930303030303130333030363939393838373231323036333130313039393938383732313230363331303130303038303030303938373736313233343536372020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020203030303030303032303030303030303035393939392020202020202020202020202020202030303030303030302020202020202020202020202020303030303030303030323832343437333032303230303130393230303431363939393838373231323036333130313046323230353138323433393939383837323132303633313031202020203730303030333639313038324633453337314143463243434530303030303030303130393031303930303030303130332020202030393039303130392020202020202020303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030313838383838383839393939393939393030303039383737363132333435363739393939313233312020202020202020202020203030303030303030303030303030303030303030303030303030303030302020202020202020202031302E31312E33322E353120202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020</Rq>\n"
				+
				"  </SvcRq>\n" +
				"</FEP>";
		this.testProcessRequestData(messageXml);
	}

	@Test
	public void testIIQ2500() throws Exception {
		String messageXml = "<?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n"
				+ "<FEP>\n" +
				"  <RqHeader>\n" +
				"    <BranchID>768</BranchID>\n" +
				"    <ChlEJNo>20210526T175938840</ChlEJNo>\n" +
				"    <ChlName>WEBATM</ChlName>\n" +
				"    <ChlSendTime>2021/05/26T17:59:38:840</ChlSendTime>\n" +
				"    <MsgID>IIQ</MsgID>\n" +
				"    <MsgType>G</MsgType>\n" +
				"    <TermID>25</TermID>\n" +
				"    <TxnID>IIQ</TxnID>\n" +
				"  </RqHeader>\n" +
				"  <SvcRq>\n" +
				"    <Rq>0F0F0F000589013031320F0F20204949514132303134303830353736383235313031303031303030303030303130313130303532363030313130303532363030303030303132303039303035303530303130303135363030303030353035303031303031353630303030303030303030303030303030303030303030202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020303030303030303030303030303030302020202020202020202020202020202020202020203030303030303030202020202020202020202020202030303030303030303037353437383733313030303030303030303030303030303035303530303130303135363030303530353030313030313536303030303130463232323434343636363131303030303032383439353335414536344233464333313035363030303030303030313130303532363030303030303132202020203236313030353236202020202020202030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303020202020202020202020202020202020202020202020202020202020202020202020202020202020</Rq>\n"
				+
				"  </SvcRq>\n" +
				"</FEP>";
		this.testProcessRequestData(messageXml);
	}

	/**
	 * 晶片卡轉帳確認
	 * ATMConfirmA
	 * 
	 * @throws Exception
	 */
	@Test
	public void testIFF2521() throws Exception {
		String messageXml = "<?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n"
				+ "<FEP>\n" +
				"  <RqHeader>\n" +
				"    <BranchID>768</BranchID>\n" +
				"    <ChlEJNo>20210526T163021429</ChlEJNo>\n" +
				"    <ChlName>WEBATM</ChlName>\n" +
				"    <ChlSendTime>2021/05/26T16:30:21:429</ChlSendTime>\n" +
				"    <MsgID>IFF</MsgID>\n" +
				"    <MsgType>G</MsgType>\n" +
				"    <TermID>25</TermID>\n" +
				"    <TxnID>IFT</TxnID>\n" +
				"  </RqHeader>\n" +
				"  <SvcRq>\n" +
				"    <Rq>0F0F0F000670013030330F0F2020494646413230313430383035373638323531303130303130303030303030323031313030353236363031313030353236303030303030303338303730303030333030343030343038323638303030303330303430303430383236383030363030303939393838373231323036333120202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202030303030303130303030303030303030202020202020202020202020202020202020202020303030303030303020202020202020202020202020203030303030303030303138393432383533323032313035323631363238313230303030333030343030343038323638303033303034303034303832363830313030343330323239393232393230303030303532343343303934433044353937343930423930313336303630313031313030353236303030303030303220202020323631303035323620202020202020203030313030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030302020202020202020202020202020202020202020202020202020202020202020202020202020202030303030303030303030303030303030303030303030303030303030303031302E31312E3138392E3134202020202020202020202020202020202020202020202020202020202020202020202020202020</Rq>\n"
				+
				"  </SvcRq>\n" +
				"</FEP>";
		this.testProcessRequestData(messageXml);
	}

	@Test
	public void testIFT2522() throws Exception {
		String messageXml = "<?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n"
				+ "<FEP>\n" +
				"  <RqHeader>\n" +
				"    <BranchID>768</BranchID>\n" +
				"    <ChlEJNo>20210526T180103565</ChlEJNo>\n" +
				"    <ChlName>WEBATM</ChlName>\n" +
				"    <ChlSendTime>2021/05/26T18:01:03:565</ChlSendTime>\n" +
				"    <MsgID>IFT</MsgID>\n" +
				"    <MsgType>G</MsgType>\n" +
				"    <TermID>25</TermID>\n" +
				"    <TxnID>IFT</TxnID>\n" +
				"  </RqHeader>\n" +
				"  <SvcRq>\n" +
				"    <Rq>0F0F0F000670013031330F0F2020494654413230313430383035373638323531303130303130303030303030313031313030353236303031313030353236303030303030313330303930303530353030313030313536303030303035303530303130303135363030303830373030313834303138303030343139353220202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202030303030303130303030303030303030202020202020202020202020202020202020202020303030303030303020202020202020202020202020203030303030303030303732333933323034323032313035323631383030303530303530353030313030313536303030353035303031303031353630303030313046323232343434363636313130303030303238353031303838433230454243304445303036303030303030303031313030353236303030303030313320202020323631303035323620202020202020203030313030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030302020202020202020202020202020202020202020202020202020202020202020202020202020202030303030303030303030303030303030303030303030303030303030303031302E31312E3138392E3134202020202020202020202020202020202020202020202020202020202020202020202020202020</Rq>\n"
				+
				"  </SvcRq>\n" +
				"</FEP>";
		this.testProcessRequestData(messageXml);
	}

	/**
	 * 晶片卡轉帳確認
	 * ATMConfirmA
	 * 
	 * @throws Exception
	 */
	@Test
	public void testIFF2522() throws Exception {
		String messageXml = "<?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n"
				+ "<FEP>\n" +
				"  <RqHeader>\n" +
				"    <BranchID>768</BranchID>\n" +
				"    <ChlEJNo>20210526T180104877</ChlEJNo>\n" +
				"    <ChlName>WEBATM</ChlName>\n" +
				"    <ChlSendTime>2021/05/26T18:01:04:877</ChlSendTime>\n" +
				"    <MsgID>IFF</MsgID>\n" +
				"    <MsgType>G</MsgType>\n" +
				"    <TermID>25</TermID>\n" +
				"    <TxnID>IFT</TxnID>\n" +
				"  </RqHeader>\n" +
				"  <SvcRq>\n" +
				"    <Rq>0F0F0F000670013031340F0F2020494646413230313430383035373638323531303130303130303030303030323031313030353236363031313030353236303030303030313430303930303530353030313030313536303030303035303530303130303135363030303830373030313834303138303030343139353220202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202030303030303130303030303030303030202020202020202020202020202020202020202020303030303030303020202020202020202020202020203030303030303030303732333933323034323032313035323631383030303530303530353030313030313536303030353035303031303031353630303030313046323232343434363636313130303030303238353031303838433230454243304445303036313336303631323031313030353236303030303030313320202020323631303035323620202020202020203030313030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030302020202020202020202020202020202020202020202020202020202020202020202020202020202030303030303030303030303030303030303030303030303030303030303031302E31312E3138392E3134202020202020202020202020202020202020202020202020202020202020202020202020202020</Rq>\n"
				+
				"  </SvcRq>\n" +
				"</FEP>";
		this.testProcessRequestData(messageXml);
	}

	@Test
	public void testIFT2523() throws Exception {
		String messageXml = "<?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n"
				+ "<FEP>\n" +
				"  <RqHeader>\n" +
				"    <BranchID>768</BranchID>\n" +
				"    <ChlEJNo>20210526T180214607</ChlEJNo>\n" +
				"    <ChlName>WEBATM</ChlName>\n" +
				"    <ChlSendTime>2021/05/26T18:02:14:607</ChlSendTime>\n" +
				"    <MsgID>IFT</MsgID>\n" +
				"    <MsgType>G</MsgType>\n" +
				"    <TermID>25</TermID>\n" +
				"    <TxnID>IFT</TxnID>\n" +
				"  </RqHeader>\n" +
				"  <SvcRq>\n" +
				"    <Rq>0F0F0F000670013031350F0F2020494654413230313430383035373638323531303130303130303030303030313031313030353236303031313030353236303030303030313530303930303530353030313030313536303030303035303530303130303135363030303030393030343230323836303033303039303020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202030303030303230303030303030303030202020202020202020202020202020202020202020303030303030303020202020202020202020202020203030303030303030303937363038353732323032313035323631383031313830303530353030313030313536303030353035303031303031353630303030313046323232343434363636313130303030303238353145364342413641433432303042443434303030303030303031313030353236303030303030313520202020323631303035323620202020202020203030313030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030302020202020202020202020202020202020202020202020202020202020202020202020202020202030303030303030303030303030303030303030303030303030303030303031302E31312E3138392E3134202020202020202020202020202020202020202020202020202020202020202020202020202020</Rq>\n"
				+
				"  </SvcRq>\n" +
				"</FEP>";
		this.testProcessRequestData(messageXml);
	}

	/**
	 * 晶片卡轉帳確認
	 * ATMConfirmA
	 * 
	 * @throws Exception
	 */
	@Test
	public void testIFF2523() throws Exception {
		String messageXml = "<?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n"
				+ "<FEP>\n" +
				"  <RqHeader>\n" +
				"    <BranchID>768</BranchID>\n" +
				"    <ChlEJNo>26T180215513</ChlEJNo>\n" +
				"    <ChlName>WEBATM</ChlName>\n" +
				"    <ChlSendTime>2021/05/26T18:02:15:513</ChlSendTime>\n" +
				"    <MsgID>IFF</MsgID>\n" +
				"    <MsgType>G</MsgType>\n" +
				"    <TermID>25</TermID>\n" +
				"    <TxnID>IFT</TxnID>\n" +
				"  </RqHeader>\n" +
				"  <SvcRq>\n" +
				"    <Rq>0F0F0F000670013031360F0F2020494646413230313430383035373638323531303130303130303030303030323031313030353236363031313030353236303030303030313630303930303530353030313030313536303030303035303530303130303135363030303030393030343230323836303033303039303020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202030303030303230303030303030303030202020202020202020202020202020202020202020303030303030303020202020202020202020202020203030303030303030303937363038353732323032313035323631383031313830303530353030313030313536303030353035303031303031353630303030313046323232343434363636313130303030303238353145364342413641433432303042443434313336303631343031313030353236303030303030313520202020323631303035323620202020202020203030313030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030302020202020202020202020202020202020202020202020202020202020202020202020202020202030303030303030303030303030303030303030303030303030303030303031302E31312E3138392E3134202020202020202020202020202020202020202020202020202020202020202020202020202020</Rq>\n"
				+
				"  </SvcRq>\n" +
				"</FEP>";
		this.testProcessRequestData(messageXml);
	}

	@Test
	public void testIFT2524() throws Exception {
		String messageXml = "<?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n"
				+ "<FEP>\n" +
				"  <RqHeader>\n" +
				"    <BranchID>768</BranchID>\n" +
				"    <ChlEJNo>20210526T180330802</ChlEJNo>\n" +
				"    <ChlName>WEBATM</ChlName>\n" +
				"    <ChlSendTime>2021/05/26T18:03:30:802</ChlSendTime>\n" +
				"    <MsgID>IFT</MsgID>\n" +
				"    <MsgType>G</MsgType>\n" +
				"    <TermID>25</TermID>\n" +
				"    <TxnID>IFT</TxnID>\n" +
				"  </RqHeader>\n" +
				"  <SvcRq>\n" +
				"    <Rq>0F0F0F000670013031370F0F2020494654413230313430383035373638323531303130303130303030303030313031313030353236303031313030353236303030303030313730303930303530353030313030313536303030303035303530303130303135363030303030363030303939393838373231323036333120202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202030303030303330303030303030303030202020202020202020202020202020202020202020303030303030303020202020202020202020202020203030303030303030303236343933383831323032313035323631383032343230303530353030313030313536303030353035303031303031353630303030313046323232343434363636313130303030303238353244333643423146303944383738353242303030303030303031313030353236303030303030313720202020323631303035323620202020202020203030313030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030302020202020202020202020202020202020202020202020202020202020202020202020202020202030303030303030303030303030303030303030303030303030303030303031302E31312E3138392E3134202020202020202020202020202020202020202020202020202020202020202020202020202020</Rq>\n"
				+
				"  </SvcRq>\n" +
				"</FEP>";
		this.testProcessRequestData(messageXml);
	}

	/**
	 * 晶片卡轉帳確認
	 * ATMConfirmA
	 * 
	 * @throws Exception
	 */
	@Test
	public void testIFF2524() throws Exception {
		String messageXml = "<?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n"
				+ "<FEP>\n" +
				"  <RqHeader>\n" +
				"    <BranchID>768</BranchID>\n" +
				"    <ChlEJNo>20210526T180331647</ChlEJNo>\n" +
				"    <ChlName>WEBATM</ChlName>\n" +
				"    <ChlSendTime>2021/05/26T18:03:31:647</ChlSendTime>\n" +
				"    <MsgID>IFF</MsgID>\n" +
				"    <MsgType>G</MsgType>\n" +
				"    <TermID>25</TermID>\n" +
				"    <TxnID>IFT</TxnID>\n" +
				"  </RqHeader>\n" +
				"  <SvcRq>\n" +
				"    <Rq>0F0F0F000670013031380F0F2020494646413230313430383035373638323531303130303130303030303030323031313030353236363031313030353236303030303030313830303930303530353030313030313536303030303035303530303130303135363030303030363030303939393838373231323036333120202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202030303030303330303030303030303030202020202020202020202020202020202020202020303030303030303020202020202020202020202020203030303030303030303236343933383831323032313035323631383032343230303530353030313030313536303030353035303031303031353630303030313046323232343434363636313130303030303238353244333643423146303944383738353242313336303631363031313030353236303030303030313720202020323631303035323620202020202020203030313030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030302020202020202020202020202020202020202020202020202020202020202020202020202020202030303030303030303030303030303030303030303030303030303030303031302E31312E3138392E3134202020202020202020202020202020202020202020202020202020202020202020202020202020</Rq>\n"
				+
				"  </SvcRq>\n" +
				"</FEP>";
		this.testProcessRequestData(messageXml);
	}

	/**
	 * 晶片卡跨行繳稅
	 * OtherIssueRequestA
	 * 
	 * @throws Exception
	 */
	@Test
	public void testIPY2531() throws Exception {
		String messageXml = "<?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n"
				+ "<FEP>\r\n"
				+ "  <RqHeader>\r\n"
				+ "    <BranchID>768</BranchID>\r\n"
				+ "    <ChlEJNo>20200317T165810459</ChlEJNo>\r\n"
				+ "    <ChlName>PAYBILL</ChlName>\r\n"
				+ "    <ChlSendTime>2020/03/17T16:58:10:459</ChlSendTime>\r\n"
				+ "    <MsgID>IPY</MsgID>\r\n"
				+ "    <MsgType>G</MsgType>\r\n"
				+ "    <TermID>25</TermID>\r\n"
				+ "    <TxnID>IPY</TxnID>\r\n"
				+ "  </RqHeader>\r\n"
				+ "  <SvcRq>\r\n"
				+ "    <Rq>0F0F0F000698013034390F0F202049505941323031343038303537363832353130313030313030303030303031303130393033313730303130393033313730303030303035393030363939393838373231323036333130313039393938383732313230363331303130303030303030303030303030303030303030302020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020203030303030373034303030303030303031313232313736303239303030303030313030303130303039313233312020202020202020202020202020303030303030303030373835313535333732303230303331373136353733383939393838373231323036333130313046323230353138323433393939383837323132303633313031202020203730303030333938303138433739463437383739414242454330303030303030303130393033313730303030303035392020202031373039303331372020202020202020303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303020202020202020202020202020202020202020203030303030303030303030303030303030303030303030303030303030302020202020202020202031302E31312E33322E353120202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020</Rq>\r\n"
				+ "  </SvcRq>\r\n"
				+ "</FEP>";
		this.testProcessRequestData(messageXml);
	}

	/**
	 * 晶片卡自行繳稅確認
	 * ATMConfirmA
	 * 
	 * @throws Exception
	 */
	@Test
	public void testIPF2532() throws Exception {
		String messageXml = "<?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n"
				+ "<FEP>\n" +
				"  <RqHeader>\n" +
				"    <BranchID>768</BranchID>\n" +
				"    <ChlEJNo>20200309T093550862</ChlEJNo>\n" +
				"    <ChlName>PAYBILL</ChlName>\n" +
				"    <ChlSendTime>2020/03/09T09:35:50:862</ChlSendTime>\n" +
				"    <MsgID>IPF</MsgID>\n" +
				"    <MsgType>G</MsgType>\n" +
				"    <TermID>26</TermID>\n" +
				"    <TxnID>IPY</TxnID>\n" +
				"  </RqHeader>\n" +
				"  <SvcRq>\n" +
				"    <Rq>0F0F0F000589013030380F0F20204950464132303134303830353736383236313031303031303030303030303130313039303330393630313039303330393030303030303131383037303031343330303430303132393732343030313433303034303031323937323430303030303030303030303030303030303030202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020303030303037353030303030303030303135303031303030303031303132333435363738393030303030303030303238313031323334353637383930303030303030303038323138383937373230323030333039303933353136303031343330303430303132393732343134333030343030313239373234303130303530383831393338333932303030303037363838353936323036353936314445324241463738353836373830313039303330393030303030303130202020203039303930333039202020202020202030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030323830323820303030303030303030303030303030303939393931323331202020202020202020202020</Rq>\n"
				+
				"  </SvcRq>\n" +
				"</FEP>";
		this.testProcessRequestData(messageXml);
	}

	/**
	 * 晶片卡自行繳稅
	 * SelfIssueRequestA
	 * 
	 * @throws Exception
	 */
	@Test
	public void testIPY2532() throws Exception {
		String messageXml = "<?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n"
				+ "<FEP>\r\n"
				+ "  <RqHeader>\r\n"
				+ "    <BranchID>768</BranchID>\r\n"
				+ "    <ChlEJNo>20200309T093546955</ChlEJNo>\r\n"
				+ "    <ChlName>PAYBILL</ChlName>\r\n"
				+ "    <ChlSendTime>2020/03/09T09:35:46:955</ChlSendTime>\r\n"
				+ "    <MsgID>IPY</MsgID>\r\n"
				+ "    <MsgType>G</MsgType>\r\n"
				+ "    <TermID>26</TermID>\r\n"
				+ "    <TxnID>IPY</TxnID>\r\n"
				+ "  </RqHeader>\r\n"
				+ "  <SvcRq>\r\n"
				+ "    <Rq>0F0F0F000698013030370F0F202049505941323031343038303537363832363130313030313030303030303031303130393033303930303130393033303930303030303031303830373030313433303034303031323937323430303134333030343030313239373234303030303030303030303030303030303030302020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020203030303030373530303030303030303031353030313030303030313031323334353637383930303030303030303032383130313233343536373839303030303030303030383231383839373732303230303330393039333531363030313433303034303031323937323431343330303430303132393732343031303035303838313933383339323030303030373638383539363230363539363144453242414630303030303030303130393033303930303030303031302020202030393039303330392020202020202020303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303238303238203030303030303030303030303030303020202020202020202020202020202020202020203030303030303030303030303030303030303030303030303030303030302020202020202020202031302E31312E33332E323020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020</Rq>\r\n"
				+ "  </SvcRq>\r\n"
				+ "</FEP>";
		this.testProcessRequestData(messageXml);
	}

	/**
	 * 晶片卡繳費確認
	 * ATMConfirmA
	 * 
	 * @throws Exception
	 */
	@Test
	public void testEFF2561() throws Exception {
		String messageXml = "<?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n"
				+ "<FEP>\r\n"
				+ "  <RqHeader>\r\n"
				+ "    <BranchID>768</BranchID>\r\n"
				+ "    <ChlEJNo>20200309T095335372</ChlEJNo>\r\n"
				+ "    <ChlName>WEBATM</ChlName>\r\n"
				+ "    <ChlSendTime>2020/03/09T09:53:35:372</ChlSendTime>\r\n"
				+ "    <MsgID>EFF</MsgID>\r\n"
				+ "    <MsgType>G</MsgType>\r\n"
				+ "    <TermID>26</TermID>\r\n"
				+ "    <TxnID>EFT</TxnID>\r\n"
				+ "  </RqHeader>\r\n"
				+ "  <SvcRq>\r\n"
				+ "    <Rq>0F0F0F000589013032300F0F20204546464132303134303830353736383236313031303031303030303030303130313039303330393630313039303330393030303030303234383037303031343330303430303132393732343030313433303034303031323937323430303830303030393837373631323334353637202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020303030303030303230303030303030303539393939202020202020202020202020202020203030303030303030202020202020202020202020202030303030303030303034323832373833373230323030333039303935323533303031343330303430303132393732343134333030343030313239373234303130303530383831393338333932303030303037363937453733324646424441383336443544393738353836393330313039303330393030303030303233202020203039303930333039202020202020202030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303031383838383838383939393939393939202020202020202020202020202020203939393931323331202020202020202020202020</Rq>\r\n"
				+ "  </SvcRq>\r\n"
				+ "</FEP>";
		this.testProcessRequestData(messageXml);
	}

	/**
	 * 晶片卡自行繳稅
	 * SelfIssueRequestA
	 * 
	 * @throws Exception
	 */
	@Test
	public void testIFT2521() throws Exception {
		String messageXml = "<?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n"
				+ "<FEP>\r\n"
				+ "  <RqHeader>\r\n"
				+ "    <BranchID>768</BranchID>\r\n"
				+ "    <ChlEJNo>20210526T163019960</ChlEJNo>\r\n"
				+ "    <ChlName>WEBATM</ChlName>\r\n"
				+ "    <ChlSendTime>2021/05/26T16:30:19:960</ChlSendTime>\r\n"
				+ "    <MsgID>IFT</MsgID>\r\n"
				+ "    <MsgType>G</MsgType>\r\n"
				+ "    <TermID>25</TermID>\r\n"
				+ "    <TxnID>IFT</TxnID>\r\n"
				+ "  </RqHeader>\r\n"
				+ "  <SvcRq>\r\n"
				+ "    <Rq>0F0F0F000670013030320F0F2020494654413230313430383035373638323531303130303130303030303030313031313030353236303031313030353236303030303030303238303730303030333030343030343038323638303030303330303430303430383236383030363030303939393838373231323036333120202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202030303030303130303030303030303030202020202020202020202020202020202020202020303030303030303020202020202020202020202020203030303030303030303138393432383533323032313035323631363238313230303030333030343030343038323638303033303034303034303832363830313030343330323239393232393230303030303532343343303934433044353937343930423930303030303030303031313030353236303030303030303220202020323631303035323620202020202020203030313030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030302020202020202020202020202020202020202020202020202020202020202020202020202020202030303030303030303030303030303030303030303030303030303030303031302E31312E3138392E3134202020202020202020202020202020202020202020202020202020202020202020202020202020</Rq>\r\n"
				+ "  </SvcRq>\r\n"
				+ "</FEP>";
		this.testProcessRequestData(messageXml);
	}

	// 2021/11/11台北新增測試電文 END ADD BY WJ
	private void testProcessRequestData(String messageXml) throws Exception {
		RequestBuilder builder = MockMvcRequestBuilders
				.post("/recv/webatm")
				.accept(MediaType.APPLICATION_XML)
				.contentType(MediaType.APPLICATION_XML)
				.content(messageXml);

		// 執行請求
		ResultActions action = mockMvc.perform(builder);
		// 分析結果
		MvcResult result = action.andExpect(MockMvcResultMatchers.status().isOk()) // 執行狀態
				// .andExpect(MockMvcResultMatchers.jsonPath("message").value(logData.getMessage())) // 期望值
				// .andExpect(MockMvcResultMatchers.jsonPath("messageId").value(logData.getMessageId())) // 期望值
				// .andDo(MockMvcResultHandlers.print()) // 打印
				.andReturn();
		String resultStr = result.getResponse().getContentAsString();
		UnitTestLogger.info("resultStr = [", resultStr, "]");
	}
}
