package com.syscom.fep.server.controller.restful;

import com.syscom.fep.frmcommon.util.SpringBeanFactoryUtil;
import com.syscom.fep.server.ServerBaseTest;
import org.junit.jupiter.api.AfterAll;
import org.junit.jupiter.api.BeforeAll;
import org.junit.jupiter.api.Test;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.http.MediaType;
import org.springframework.test.web.servlet.MockMvc;
import org.springframework.test.web.servlet.MvcResult;
import org.springframework.test.web.servlet.RequestBuilder;
import org.springframework.test.web.servlet.ResultActions;
import org.springframework.test.web.servlet.request.MockMvcRequestBuilders;
import org.springframework.test.web.servlet.result.MockMvcResultMatchers;

public class POSControllerTest extends ServerBaseTest {
	@Autowired
	private MockMvc mockMvc;

	@BeforeAll
	public void setup() throws Exception {
		SpringBeanFactoryUtil.registerController(POSController.class);
	}

	@AfterAll
	public void tearDown() throws Exception {
		SpringBeanFactoryUtil.unregisterBean(POSController.class);
	}

	@Test // IQSelfIssue i12500自行
	public void I12500() throws Exception {
		String messageXml = "C9C2D7C2D4F0F0F040F9F9F8F2F1F0F140C6C1C1F2F3F1F1F2F0F1F4F3F9F4F6F1F6F4F5F0F1C9D5F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0E3F9F9F9F8E2F0F2F0F1C9F14040404040404040404040404040404040404040404040404040404040404040404040404040404040404040F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F040F9F0E3F0F0F3F3C6C6C6C6F0F2F4F0F0F6F0F0F0F0F0F9F9F9F8F7F6F5F1F2F3F1F6F3F0F1F0D240F2F0F0F2F5F0F0F0F0F0F0F0F2F3F1F2F0F0F0F0F1F6F4F5F2F0F2F2F0F6F2F8F1F4F3F9F4F5F6F0F1F154313232353430393230393939383736353132333136333031202020203740404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040F0F2F7F8F8F0F2F5000ABC6023BCF084DB77202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020";
		this.testProcessRequestData(messageXml);
	}

	@Test // IQSelfIssueC i12500C自行
	public void I12500C() throws Exception {
		String messageXml = "C9C2D7C2D4F0F0F040F9F9F8F2F1F0F140C6E2D5F2F3F1F1F2F0F1F4F4F0F0F5F1F6F4F5F0F2D5D5F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0E3F9F9F9F8E2F0F2F0F1C9F14040404040404040404040404040404040404040404040404040404040404040404040404040404040404040F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F040F9F0E3F0F0F3F3C6C6C6C6F0F2F4F0F0F6F0F0F0F0F0F9F9F9F8F7F6F5F1F2F3F1F6F3F0F1F0D240F2F0F0F2F5F0F0F0F0F0F0F0F2F3F1F2F0F0F0F0F1F6F4F5F2F0F2F2F0F6F2F8F1F4F3F9F4F5F6F0F1F154313232353430393230393939383736353132333136333031202020203740404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040C4F0F7F8F1F2C5C4000ABC6023BCF084DB77202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020";
		this.testProcessRequestData(messageXml);
	}

	@Test // IQOtherRequestA i12500他行
	public void OI12500() throws Exception {
		String messageXml = "C9C2D7C2D4F0F0F040F9F9F8F2F1F0F140C6C1C1F2F2F0F6F2F8F1F4F0F9F4F8F1F6F3F1F0F1C9D5F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0E3F9F9F9F8E2F0F2F0F1C9F14040404040404040404040404040404040404040404040404040404040404040404040404040404040404040F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F040F9F0E3F0F0F3F3C6C6C6C6F0F2F4F0F1F7F0F0F0F0F0F0F0F0F0F0F0F0F7F1F0F0F0F7F5F0F0D240F2F0F0F2F5F0F0F0F0F0F0F1F3F1F0F5F0F0F0F0F1F6F3F1F2F0F2F2F0F6F2F8F1F4F0F9F4F8F6F0F1F120202020202020202020333037303231363730202020202020202020202040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040C6F0F2C5C4F1F9F6000AA2B793889ED4CDC1202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020";
		this.testProcessRequestData(messageXml);
	}

	@Test // IQOtherConfirmA i12500C他行
	public void OI12500C() throws Exception {
		String messageXml = "C9C2D7C2D4F0F0F040F9F9F8F2F1F0F140C6E2D5F2F2F0F6F2F8F1F4F1F0F0F9F1F6F3F1F0F2D5D5F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0E3F9F9F9F8E2F0F2F0F1C9F14040404040404040404040404040404040404040404040404040404040404040404040404040404040404040F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F040F9F0E3F0F0F3F3C6C6C6C6F0F2F4F0F1F7F0F0F0F0F0F0F0F0F0F0F0F0F7F1F0F0F0F7F5F0F0D240F2F0F0F2F5F0F0F0F0F0F0F1F3F1F0F5F0F0F0F0F1F6F3F1F2F0F2F2F0F6F2F8F1F4F0F9F4F8F6F0F1F120202020202020202020333037303231363730202020202020202020202040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040C5F4F1F0C3F1F0F3000AA2B793889ED4CDC1202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020";
		this.testProcessRequestData(messageXml);
	}

	@Test // TROtherRequestA TW2522轉帳
	public void TW2522() throws Exception {
		String messageXml = "C9C2D7C2D4F0F0F040F9F9F8F2F1F0F140C6C1C1F2F2F0F6F2F9F1F1F1F5F3F8F1F7F2F3F0F1C9D5F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0E3F9F9F9F8E2F0F2F0F1E3E6F0F0F0F0F64040404040404040404040404040404040F0F0F9F9F9F8F7F6F5F1F2F3F1F6F340404040404040F0F0F0F0F0F0F0F0F1F0F0F0F0F0F0F0F0F0F0F0F040F9F0E3F0F0F3F3C6C6C6C6F0F2F4F0F1F6F0F0F0F0F0F0F0F0F0F0F9F3F2F1F0F0F0F3F1F0F8D240F2F0F0F2F5F2F2F0F0F0F0F0F4F9F3F1F0F0F0F0F1F7F2F3F2F0F2F2F0F6F2F9F1F1F1F5F3F8F6F0F1F139333030303130323030303030303030303030303030303030303030303040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040F2F9F3C1C1C1F4F4000A9F7EB056E043DFB5202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020";
		this.testProcessRequestData(messageXml);
	}

	@Test // TROtherConfirmA TW2522C轉帳
	public void TW2522C() throws Exception {
		String messageXml = "C9C2D7C2D4F0F0F040F9F9F8F2F1F0F140C6E2D5F2F2F0F6F2F9F1F1F1F5F5F9F1F7F2F3F0F2D5D5F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0E3F9F9F9F8E2F0F2F0F1E3E6F0F0F0F0F64040404040404040404040404040404040F0F0F9F9F9F8F7F6F5F1F2F3F1F6F340404040404040F0F0F0F0F0F0F0F0F1F0F0F0F0F0F0F0F0F0F0F0F040F9F0E3F0F0F3F3C6C6C6C6F0F2F4F0F1F6F0F0F0F0F0F0F0F0F0F0F9F3F2F1F0F0F0F3F1F0F8D240F2F0F0F2F5F2F2F0F0F0F0F0F4F9F3F1F0F0F0F0F1F7F2F3F2F0F2F2F0F6F2F9F1F1F1F5F3F8F6F0F1F139333030303130323030303030303030303030303030303030303030303040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040F5C2F1F9C5F6F4C6000A9F7EB056E043DFB5202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020";
		this.testProcessRequestData(messageXml);
	}

	@Test // TRSelfIssue T22523自行
	public void T22523() throws Exception {
		String messageXml = "C9C2D7C2D4F0F0F040F9F9F8F2F1F0F140C6C1C1F2F2F0F6F2F8F1F5F4F9F1F0F1F6F6F0F0F1C9D5F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0E3F9F9F9F8E2F0F2F0F1E3F240404040404040404040404040404040404040404040F0F0F9F9F9F7F7F6F6F8F8F5F5F0F840404040404040F0F0F0F0F1F1F1F1F1F0F0F0F0F0F0F0F0F0F0F0F040F9F0E3F0F0F3F3C6C6C6C6F0F2F4F0F0F6F0F0F0F0F0F9F9F9F7F6F9F9F1F1F1F1F1F0F0F5F0D240F2F0F0F2F5F2F3F0F0F0F0F0F0F1F5F7F0F0F0F0F1F6F6F0F2F0F2F2F0F6F2F8F1F5F4F9F1F0F6F0F1F141313032303535373139393939373639393131313131303035202020203740404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040F4F3F8F8F2F9F6F4000AACACBC5D12AB3FA8202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020";
		this.testProcessRequestData(messageXml);
	}

	@Test // SelfIssueC T22523C自行
	public void T22523C() throws Exception {
		String messageXml = "C9C2D7C2D4F0F0F040F9F9F8F2F1F0F140C6E2D5F2F2F0F6F2F8F1F5F4F9F3F4F1F6F6F0F0F2D5D5F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0E3F9F9F9F8E2F0F2F0F1E3F240404040404040404040404040404040404040404040F0F0F9F9F9F7F7F6F6F8F8F5F5F0F840404040404040F0F0F0F0F0F0F0F0F1F0F0F0F0F0F0F0F0F0F0F0F040F9F0E3F0F0F3F3C6C6C6C6F0F2F4F0F0F6F0F0F0F0F0F9F9F9F7F6F9F9F1F1F1F1F1F0F0F5F0D240F2F0F0F2F5F2F3F0F0F0F0F0F0F1F5F7F0F0F0F0F1F6F6F0F2F0F2F2F0F6F2F8F1F5F4F9F1F0F6F0F1F141313032303535373139393939373639393131313131303035202020203740404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040F2F4F6C3F4F3F4C5000AACACBC5D12AB3FA8202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020";
		this.testProcessRequestData(messageXml);
	}

	@Test // PYOtherRequestA EW2562
	public void EW2562() throws Exception {
		String messageXml = "C9C2D7C2D4F0F0F040F9F9F8F2F1F0F140C6C1C1F2F2F0F6F2F9F1F5F2F5F1F0F1F7F6F9F0F1C9D5F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F6F0F0F0F0F0F0F0E3F9F9F9F8E2F0F2F0F1C5E6F5F9F9F9F9F9F9F9F9F1F2F3F1F1F8F8F8F8F8F8F840F0F0F0F5F4F0F5F2F0F0F0F0F0F1F7F1F0F9F9F9F9F9F0F0F0F0F0F1F0F0F0F0F0F0F0F0F0F0F0F0F0F0F040F9F0E3F0F0F3F3C6C6C6C6F0F2F4F0F1F6F0F0F0F0F0F0F0F0F0F0F9F3F2F1F0F0F0F3F1F0F8D240F2F0F0F2F5F6F2F0F0F0F0F0F4F9F3F8F0F0F0F0F1F7F6F9F2F0F2F2F0F6F2F9F1F5F2F5F1F0F6F0F1F139333030303130323030303030303030303030303030303030303030303040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040F9F8C4C5F2C2C2C5000AC21EE7EE0410C56B202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020";
		this.testProcessRequestData(messageXml);
	}

	@Test // PYOtherConfirmA EW2562C
	public void EW2562C() throws Exception {
		String messageXml = "C9C2D7C2D4F0F0F040F9F9F8F2F1F0F140C6E2D5F2F2F0F6F2F9F1F5F2F5F5F3F1F7F6F9F0F2C3D5F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F6F0F0F0F0F0F0F0E3F9F9F9F8E2F0F2F0F1C5E6F5F9F9F9F9F9F9F9F9F1F2F3F1F1F8F8F8F8F8F8F840F0F0F0F5F4F0F5F2F0F0F0F0F0F1F7F1F0F9F9F9F9F9F0F0F0F0F0F1F0F0F0F0F0F0F0F0F0F0F0F0F0F0F040F9F0E3F0F0F3F3C6C6C6C6F0F2F4F0F1F6F0F0F0F0F0F0F0F0F0F0F9F3F2F1F0F0F0F3F1F0F8D240F2F0F0F2F5F6F2F0F0F0F0F0F4F9F3F8F0F0F0F0F1F7F6F9F2F0F2F2F0F6F2F9F1F5F2F5F1F0F6F0F1F139333030303130323030303030303030303030303030303030303030303040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040F3F5C1F1F9C5F5F0000AC21EE7EE0410C56B202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020";
		this.testProcessRequestData(messageXml);
	}

	@Test // PYSelfIssue EA2563
	public void EA2563() throws Exception {
		String messageXml = "C9C2D7C2D4F0F0F040F9F9F8F2F1F0F140C6C1C1F2F2F0F6F2F9F1F0F3F1F2F2F1F7F0F4F0F1C9D5F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F6F0F0F0F0F0F0F0E3F9F9F9F8E2F0F2F0F1C5C1F5F9F9F9F9F9F9F9F9F1F2F3F1F1F8F8F8F8F8F8F840F0F0F0F0F0F9F9F9F8F7F6F5F1F2F3F1F6F3F9F9F9F9F0F0F0F0F0F1F0F0F0F0F0F0F0F0F0F0F0F0F0F0F040F9F0E3F0F0F3F3C6C6C6C6F0F2F4F0F0F6F0F0F0F0F0F9F9F9F7F6F9F9F1F1F1F1F1F0F0F5F0D240F2F0F0F2F5F6F3F0F0F0F0F0F0F1F8F5F0F0F0F0F1F7F0F4F2F0F2F2F0F6F2F9F1F0F3F1F2F2F6F0F1F141313032303535373139393939373639393131313131303035202020203740404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040F7C1C1C1C4F9F8C1000A304C7E1DF0D9933B202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020";
		this.testProcessRequestData(messageXml);
	}

	@Test // PYSelfIssueC EA2563C
	public void EA2563C() throws Exception {
		String messageXml = "C9C2D7C2D4F0F0F040F9F9F8F2F1F0F140C6E2D5F2F2F0F6F2F9F1F0F3F1F4F7F1F7F0F4F0F2C3D5F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F6F0F0F0F0F0F0F0E3F9F9F9F8E2F0F2F0F1C5C1F5F9F9F9F9F9F9F9F9F1F2F3F1F1F8F8F8F8F8F8F840F0F0F0F0F0F9F9F9F8F7F6F5F1F2F3F1F6F3F9F9F9F9F0F0F0F0F0F1F0F0F0F0F0F0F0F0F0F0F0F0F0F0F040F9F0E3F0F0F3F3C6C6C6C6F0F2F4F0F0F6F0F0F0F0F0F9F9F9F7F6F9F9F1F1F1F1F1F0F0F5F0D240F2F0F0F2F5F6F3F0F0F0F0F0F0F1F8F5F0F0F0F0F1F7F0F4F2F0F2F2F0F6F2F9F1F0F3F1F2F2F6F0F1F141313032303535373139393939373639393131313131303035202020203740404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040C6F0C5C1C4C5C3F8000A304C7E1DF0D9933B202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020";
		this.testProcessRequestData(messageXml);
	}

	private void testProcessRequestData(String messageXml) throws Exception {
		RequestBuilder builder = MockMvcRequestBuilders
				.post("/recv/pos")
				.accept(MediaType.APPLICATION_XML)
				.contentType(MediaType.APPLICATION_XML)
				.content(messageXml);
		// 執行請求
		ResultActions action = mockMvc.perform(builder);
		// 分析結果
		MvcResult result = action.andExpect(MockMvcResultMatchers.status().isOk()) // 執行狀態
				.andReturn();
		String resultStr = result.getResponse().getContentAsString();
//		UnitTestLogger.info("resultStr = [", resultStr, "]");
	}
}
