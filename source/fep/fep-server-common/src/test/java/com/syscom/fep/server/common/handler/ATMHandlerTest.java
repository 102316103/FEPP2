package com.syscom.fep.server.common.handler;

import com.syscom.fep.base.enums.FEPChannel;
import com.syscom.fep.base.enums.FEPReturnCode;
import com.syscom.fep.base.enums.ProgramFlow;
import com.syscom.fep.base.vo.LogData;
import com.syscom.fep.server.common.ServerCommonBaseTest;
import org.junit.jupiter.api.AfterEach;
import org.junit.jupiter.api.BeforeEach;
import org.junit.jupiter.api.Test;

import static org.junit.jupiter.api.Assertions.assertEquals;

public class ATMHandlerTest extends ServerCommonBaseTest {

	private ATMHandlerP2 atmHandler;

	@BeforeEach
	public void setup() throws Exception {
		atmHandler = new ATMHandlerP2();
		LogData request = new LogData();
		request.setProgramFlowType(ProgramFlow.AAServiceIn);
		atmHandler.setEj(request.getEj());
		atmHandler.setLogContext(request);
	}

	@AfterEach
	public void tearDown() throws Exception {
	}

	@Test
	public void test_AA_ProcessRequestData() throws Exception {
//		String data ="43394332443743324434463046304630343046394639463846324631463046313430433643314331463246324630463646324639463146304631463146304636463146364639463946304631433944354630463046304630463046304630463046304630463046304630463046304630463046304630463046304630463045334639463946394638453246304632463046314533463534303430463146354630463046313430343034303430343034303430343034303430343034303430343034304533463546314631463146314630463146324633463446354636463746384639343034303430343034303430463046304630463046304630463146304635463046304630463046304630463046304630463046304630343046394630453346304630463346334336433643364336463046324634463046304636463046304630463046304639463946394637463646394639463146314631463146314630463046354630443234304632463046304632463546334632463046304630463046304630463146374639463046304630463046314636463946394632463046324632463046364632463946314630463146314630463646364630463146313431333133303332333033353335333733313339333933393339333733363339333933313331333133313331333033303335323032303230323033373430343034303430343034303430343034303430343034303430343034303430343034303430343034303430343034303430343034303430343034303430343034303430343034303430343034303430343034303430343034303430343034303430343034303430343034303430343034303430343034303430343034303430343034303430343034303430343034303430343034303430343034303430343034303430343034303430343034303430343034303430343034303430343034303430343034303430343034303430343034303430343034303430343034303430343034303430343034303430463146324635433346354336433146393030304139433436443235304433344532303346323032303230323032303230323032303230323032303230323032303230323032303230323032303230323032303230323032303230323032303230323032303230323032303230323032303230323032303230323032303230323032303230323032303230323032303230323032303230323032303230323032303230323032303230323032303230323032303230323032303230323032303230323032303230323032303230323032303230323032303230323032303230323032303230323032303230323032303230323032303230323032303230323032303230323032303230323032303230323032303230";
		String data = "C9C2D7C2D4F0F0F040F9F9F8F2F1F0F140C6C1C1F2F2F0F6F2F8F1F0F2F4F0F6F1F6F2F8F0F1C9D5F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0E3F9F9F9F8E2F0F2F0F1E6F34040404040404040404040404040404040404040404040404040404040404040404040404040404040404040F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F1F0F0F0F0F040F9F0E3F0F0F3F3C6C6C6C6F0F2F4F0F0F6F0F0F0F0F0F1F1F0F0F6F0F0F0F0F0F0F0F8F8F3F3D840F2F0F0F2F5F1F0F0F0F0F0F0F0F1F3F5F0F0F0F0F1F6F2F8F2F0F2F2F0F6F2F8F1F0F2F3F5F1C1F5F0C239393937373635393932383832303152635022062811C6F2E9ECD5128C7640404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040C6F5F8F9C4F1F4F1000ACCB2E6A0353CED22202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020";
//		String data = "IBPBM000 9982101 FAA220628143817164401IN00000000000000000000000T9998S0201I2                        9998765123163       000000000000000000000 90T0033FFFF024006000009998765123163010K 200250000000231100001644202206281438166011.........................    .                                                                                                                      AB6D9DE0..!.R..\"..                                                                                                                        ";
		FEPReturnCode rtnCode = (FEPReturnCode) this.invokeMethod(atmHandler, "dispatch",
				new Class[] { FEPChannel.class, String.class, String.class },
				new Object[] { FEPChannel.ATM, "T9998I01", data });
		assertEquals(rtnCode, FEPReturnCode.Normal);
	}

}
