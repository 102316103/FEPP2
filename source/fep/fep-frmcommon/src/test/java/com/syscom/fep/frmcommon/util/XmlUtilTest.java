package com.syscom.fep.frmcommon.util;

import org.apache.commons.lang3.StringUtils;
import org.apache.commons.lang3.builder.ReflectionToStringBuilder;
import org.apache.commons.lang3.builder.ToStringStyle;
import org.jdom2.Element;
import org.junit.jupiter.api.Test;

import com.syscom.fep.frmcommon.log.LogHelper;
import com.thoughtworks.xstream.annotations.XStreamAlias;

public class XmlUtilTest {
	private LogHelper logger = new LogHelper();

	@Test
	public void testGetElementValue() {
		String xml =
				"<request><atmno>03957</atmno><ej>282</ej><message>0F0F0F000674013134300F0F2020495744413031313030313331303339353730303030303030303033303330323031313030373035363031313030373035303031343433303230303930303530353030313030313536303030303035303530303130303135363030303030303030303030303030303030303030303030303030303030303030303030303030393030303039303035303530303130303135363030303d313538393031303030303030303030303030303030343030303030303030303030303030303030313d3030303030303030303030303d3030303030303030303030303d303d303332313730303038343233303030303130303030313030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030333832353236383230323130373035313534363439303035303530303130303135363030303530353030313030313536303030303130463232323434343636363131303030303032373735313e333336353a3133363e37323a39343030303030303032303231303730353030303130313531202020203035313030373035313e31313c353a3e3030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030302020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202030303030303030303030303030303030303030303030303030303030303030303130303030303030303020202020202020202020202020202020202020202020202020202020202020203030303020202020202020</message></request>";
		try {
			Element root = XmlUtil.load(xml);
			String message = XmlUtil.getChildElementValue(root, "message", StringUtils.EMPTY);
			logger.info(message);
		} catch (Exception e) {
			// logger
		}
	}

	@Test
	public void test() {
		Module m = new Module();
		m.setA(1);
		m.setB(2);

		m = XmlUtil.fromXML("<module><a>1</a><b>2</b></module>", Module.class);
		logger.info(ReflectionToStringBuilder.toString(m, ToStringStyle.SHORT_PREFIX_STYLE));
	}

	@XStreamAlias("module")
	private class Module {
		private int a;
		private int b;

		@SuppressWarnings("unused")
		public int getA() {
			return a;
		}

		public void setA(int a) {
			this.a = a;
		}

		@SuppressWarnings("unused")
		public int getB() {
			return b;
		}

		public void setB(int b) {
			this.b = b;
		}
	}
}
